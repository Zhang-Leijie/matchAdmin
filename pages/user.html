<div class="admin_content_innerBox admin_ui_cont_bottomPadding" >
	<div class="admin_scrollBox">
		<div class="admin_ui_header">
			<i class="fa fa-shopping-bag fa-2x admin_ui_mainColor"></i>
			<span class="maintitle">选手信息</span>
		</div>	
		<div class="admin_ui_cont" id="user_content">
			<table class="admin_ui_table">
				<thead>
					<tr>
						<th>名次</th>
						<th>队伍名称</th>
						<th>学校</th>
						<th>总分</th>
						<th>队伍信息</th>
					</tr>
				</thead>
				<tbody class="admin_ui_table_hoverEffect">
					<tr v-for="list in lists">
						<td>{{$index+1}}</td>
						<td>{{list.account}}</td>
						<td>{{list.school_name}}</td>
						<td>{{list.totalscore}}</td>
						<td>
							<a :href="'#/userdetail.html?id='+list.id+'&pos='+$index" class="iconButton checkIcon">
								<i class="fa fa-pencil"></i>
								查看
							</a>
							<div class="iconButton removeIcon">
								<i class="fa fa-remove"></i>
								删除
							</div>
						</td>
					</tr>
				</tbody>
			</table>
			<div class="admin_ui_pagination">
				<!-- <div class="M-box pc" v-show="dataSource_filter.length>0"></div> -->
			</div>
		</div>
	</div>
</div>
<div class="admin_ui_cont_bottomFixed" id="admin_ui_cont_bottomFixed">
	<div class="admin_ui_button_group" style="float: right">
		<input id="objective_import" type="file" style="display:none;" @change="import">
		<label for="objective_import" class="admin_ui_button admin_ui_button_green" @click="confirm">
			导入信息
		</label>
		<a class="admin_ui_button admin_ui_button_white">
			打印证书
		</a>
	</div>
</div>
<script>
new Vue({
	el: '#user_content',
	data: function(){
		return{
			lists:[]
		}
	},
	ready: function(){
		var self = this
		ajaxP('/MatchAdmin/index/UserInfo').then(function(data){
			self.lists = data
		})
	}
})
new Vue({
	el: '#admin_ui_cont_bottomFixed',
	data: function(){
		return {
			
		}
	},
	methods: {
		confirm: function(event){
			if(confirm('最新导入信息将覆盖原有信息')) {
				return true
			} else {
				event.preventDefault()
			}
		},
		import: function(e){
			var formData = new FormData()
			formData.append('file_stu', e.target.files[0])
			ajaxP('/MatchAdmin/index/AccountImport', formData, {
				//multipart/form-data
				type: "POST",
				processData: false,
				contentType: false,
				cache: false
			}).then(function(res){
				// window.location.reload()
			}).catch(function(e){
				alert('导入失败' + (e.message ? ': ' + e.message : ""))
			})
		}
	},
	ready: function(){
	}
})
</script>