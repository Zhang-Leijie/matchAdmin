<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="chendind">
    <meta name="reply-to" content="chendind@xiyoukeji.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="../source/css/colpick.css">
    <link rel="stylesheet" type="text/css" href="../source/css/classic.css">
    <link rel="stylesheet" type="text/css" href="../source/css/classic.date.css">
    <link rel="stylesheet" type="text/css" href="../source/plunges/fontAwesome/css/font-awesome.min.css">

    <link rel="stylesheet" type="text/css" href="../source/css/reset.css">
    <link rel="stylesheet" type="text/css" href="../source/css/ui.css">
    <link rel="stylesheet" type="text/css" href="../source/css/index.css">
    <link rel="stylesheet" type="text/css" href="../source/css/pagination.css">
    <link rel="stylesheet" type="text/css" href="../source/css/_custom.css">

    <script src="../source/js/jquery-1.11.1.min.js"></script>
    <script src="../source/js/vue.js"></script>
    <script src="../source/js/ajax.js"></script>
    <script src="../source/js/public.js"></script>

    <script src="../source/plunges/tinymce/tinymce.js"></script>
    <script src="../source/js/jquery.pagination.min.js"></script>
</head>
<body>
    <div id="admin_body" class="admin_body">
        <div id="admin_header" class="admin_header">
            <div class="brand">
            <div class="heart"><i class="fa fa-heart-o fa-lg"></i></div>
            <span style="font-size:20px;margin-left:10px;">互联网金融大赛端后台管理系统</span>
        </div>
        <div class="client" id="client">
            <img src="../source/images/avatar.jpg" class="personimg">
            <div id="admin_name" class="name">管理员</div>
            <div class="xiala"><i class="fa fa-sort-desc" style="color:white"></i></div>
        </div>
        <div id="admin_ui_dropdown_menu" class="admin_ui_dropdown_menu" data-hideWhenBlur>
            <!-- <a href="#/adminAccount.html">
                <i class="fa fa-cogs"></i>&nbsp;账号管理
            </a> -->
            <a id="logoutButton" @click="sign_out">
                <i class="fa fa-sign-out"></i>&nbsp;退出登录
            </a>
        </div>
    </div>
    <div id="admin_left" class="admin_left">
        <div class="leftmenu">
            <div>
                <a href="#/objective.html" class="line">
                    <span class="icon markIcon">
                        <i class="fa fa-file-text-o fa-lg"></i>
                    </span>
                    <div class="name">客观题</div>
                </a>
            </div>
            <div>
                <a class="line" href="#/raise.html">
                    <span class="icon markIcon">
                        <i class="fa fa-calendar-plus-o fa-lg"></i>
                    </span>
                    <div class="name">项目发标</div>
                </a>
            </div>
            <div>
                <a class="line" href="#/invest.html">
                    <span class="icon markIcon">
                        <i class="fa fa-calendar-times-o fa-lg"></i>
                    </span>
                    <div class="name">审标操作</div>
                </a>
            </div> 
            <div>
                <a class="line" href="#/bid.html">
                    <span class="icon markIcon">
                        <i class="fa fa-calendar-check-o fa-lg"></i>
                    </span>
                    <div class="name">投标操作</div>
                </a>
            </div> 
            <div>
                <a class="line" href="#/case.html">
                    <span class="icon markIcon">
                        <i class="fa fa-commenting fa-lg"></i>
                    </span>
                    <div class="name">案例分析</div>
                </a>
            </div> 
            <div>
                <a class="line" href="#/charity.html">
                    <span class="icon markIcon">
                        <i class="fa fa-sliders fa-lg"></i>
                    </span>
                    <div class="name">公益设计</div>
                </a>
            </div>
            <div>
                <a class="line" href="#/item.html">
                    <span class="icon markIcon">
                        <i class="fa fa-sort-amount-desc fa-lg"></i>
                    </span>
                    <div class="name">项目设计</div>
                </a>
            </div>
            <div>
                <a class="line" href="#/newWorld.html">
                    <span class="icon markIcon">
                        <i class="fa fa-paper-plane-o fa-lg"></i>
                    </span>
                    <div class="name">创业新天地</div>
                </a>
            </div>  
            <div>
                <a class="line" href="#/user.html">
                    <span class="icon markIcon">
                        <i class="fa fa-users fa-lg"></i>
                    </span>
                    <div class="name">选手信息</div>
                </a>
            </div>         
        </div>
    </div>
    <div id="admin_content" class="admin_content"></div>
</div>
<script>
    new Vue({
        el: '#logoutButton',
        data: function(){
            return{}
        },
        methods: {
            sign_out:function(){
                var self = this
                ajaxP('/MatchAdmin/log/Logout',{
                }).then(function(){
                    window.location = 'sign_in.html'
                })
            }
        }
    })

    function getQueryVariable(variable) {
        var query = window.location.hash
        var vars = query.split("?").pop().split('&')
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }

    function uploadFactory(imgId) {
        var state = {
            uploading: false
        }
        return {
            state: state,
            callback: function(field_name, url, type, win) {
                if(type=='image') {
                    $('#' + field_name).attr('placeholder', '上传中...')
                    var $img = $('#' + imgId)
                    if (state.uploading) {
                        alert('请等待现有一张图片上传')
                        return
                    }
                    $img.click()
                    $img.unbind('change')
                    $img.on('change', function(e){
                        var file = e.target.files[0]
                        var formData = new FormData()
                        state.uploading = true
                        formData.append('file', file)
                        Promise.resolve($.ajax({
                            url: '/home/asist/photo_upload',
                            data: formData,
                            type: "POST",
                            processData: false,
                            contentType: false,
                            cache: false
                        })).then(function(res){
                            res = JSON.parse(res)
                            $('#' + field_name).val(res.order[0].file)
                            $('#' + field_name).attr('placeholder', '')
                           state.uploading = false
                        })
                    })
                }
            } 
        }
    }
</script>
</body>
</html>